<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body {
        margin: 0;
        padding: 20px;
      }
      input[type="text"],
      textarea {
        width: 100%;
        box-sizing: border-box;
      }
      textarea {
        height: 200px;
        margin-top: 20px;
        font-size: 12px;
      }
    </style>
  </head>
  <body>
    <form id="form">
      <fieldset id="fieldset">
        <legend>option</legend>
        Prevent default for:
        <label>
          <input type="checkbox" name="keydownStop" value="1" /> keydown
        </label>
        <label>
          <input type="checkbox" name="keyupStop" value="1" /> keyup
        </label>

        <p>
          Ignore:
          <label>
            <input type="checkbox" name="keydownIgnore" value="1" />
            keydown
          </label>
          <label>
            <input type="checkbox" name="keyupIgnore" value="1" /> keyup
          </label>
        </p>
      </fieldset>

      <p>Input에 포커스한 후 키보드 키를 눌러보세요.</p>

      <input
        type="text"
        placeholder="키를 입력하세요."
        id="kinput"
        autocomplete="off"
      />

      <textarea id="area" readonly></textarea>
      <input type="button" value="Clear" onclick="area.value = ''" />
    </form>

    <script>
      {
        let lastTime = Date.now();
        kinput.onkeydown = kinput.onkeyup = kinput.onkeypress = handle;

        function handle(e) {
          if (form.elements[e.type + "Ignore"]?.checked) return;

          if (form.elements[e.type + "Stop"]?.checked) {
            e.preventDefault();
          }

          let text =
            e.type +
            " key=" +
            e.key +
            " code=" +
            e.code +
            (e.shiftKey ? " shiftKey" : "") +
            (e.ctrlKey ? " ctrlKey" : "") +
            (e.altKey ? " altKey" : "") +
            (e.metaKey ? " metaKey" : "") +
            (e.repeat ? " (repeat)" : "") +
            "\n";

          if (area.value && Date.now() - lastTime > 300) {
            area.value += new Array(81).join("-") + "\n";
          }
          lastTime = Date.now();

          area.value += text;
          area.scrollTop = area.scrollHeight;
        }
      }
    </script>
  </body>
</html>
